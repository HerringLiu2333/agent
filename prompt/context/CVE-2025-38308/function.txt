static int avs_hw_constraints_init(struct snd_pcm_substream *substream, struct snd_soc_dai *dai)
{
	struct snd_soc_pcm_runtime *rtd = snd_soc_substream_to_rtd(substream);
	struct snd_pcm_runtime *runtime = substream->runtime;
	struct snd_pcm_hw_constraint_list *r, *c, *s;
	struct avs_tplg_path_template *template;
	struct avs_dma_data *data;
	int ret;

	ret = snd_pcm_hw_constraint_integer(runtime, SNDRV_PCM_HW_PARAM_PERIODS);
	if (ret < 0)
		return ret;

	data = snd_soc_dai_get_dma_data(dai, substream);
	r = &(data->rate_list);
	c = &(data->channels_list);
	s = &(data->sample_bits_list);

	template = avs_dai_find_path_template(dai, !rtd->dai_link->no_pcm, substream->stream);
	ret = avs_path_set_constraint(data->adev, template, r, c, s);
	if (ret <= 0)
		return ret;

	ret = snd_pcm_hw_constraint_list(runtime, 0, SNDRV_PCM_HW_PARAM_RATE, r);
	if (ret < 0)
		return ret;

	ret = snd_pcm_hw_constraint_list(runtime, 0, SNDRV_PCM_HW_PARAM_CHANNELS, c);
	if (ret < 0)
		return ret;

	ret = snd_pcm_hw_constraint_list(runtime, 0, SNDRV_PCM_HW_PARAM_SAMPLE_BITS, s);
	if (ret < 0)
		return ret;

	return 0;
}