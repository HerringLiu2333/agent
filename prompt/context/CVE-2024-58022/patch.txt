    diff --git a/drivers/mailbox/mailbox-th1520.c b/drivers/mailbox/mailbox-th1520.c
    index 4e84640ac3b876..e16e7c85ee3cd5 100644
    --- a/drivers/mailbox/mailbox-th1520.c
    +++ b/drivers/mailbox/mailbox-th1520.c
    @@ -387,8 +387,10 @@ static void __iomem *th1520_map_mmio(struct platform_device *pdev,
     
     	mapped = devm_ioremap(&pdev->dev, res->start + offset,
     			      resource_size(res) - offset);
    -	if (IS_ERR(mapped))
    +	if (!mapped) {
     		dev_err(&pdev->dev, "Failed to map resource: %s\n", res_name);
    +		return ERR_PTR(-ENOMEM);
    +	}
     
     	return mapped;
     }