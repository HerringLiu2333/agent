 diff --git a/fs/jfs/jfs_extent.c b/fs/jfs/jfs_extent.c
 index 63d21822d309be…46529bcc8297ea 100644
 --- a/fs/jfs/jfs_extent.c
 +++ b/fs/jfs/jfs_extent.c
 @@ -74,6 +74,11 @@ extAlloc(struct inode ip, s64 xlen, s64 pno, xad_t * xp, bool abnr)
   int rc;
   int xflag;

 + if (isReadOnly(ip)) {
 + jfs_error(ip->i_sb, “read-only filesystem\n”);
 + return -EIO;
 + }
 +
   / This blocks if we are low on resources /
   txBeginAnon(ip->i_sb);

 @@ -253,6 +258,11 @@ int extRecord(struct inode *ip, xad_t * xp)
   {
   int rc;

 + if (isReadOnly(ip)) {
 + jfs_error(ip->i_sb, “read-only filesystem\n”);
 + return -EIO;
 + }
 +
   txBeginAnon(ip->i_sb);

   mutex_lock(&JFS_IP(ip)->commit_mutex);