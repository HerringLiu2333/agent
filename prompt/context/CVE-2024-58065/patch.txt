    diff --git a/drivers/clk/mmp/clk-pxa1908-apbc.c b/drivers/clk/mmp/clk-pxa1908-apbc.c
    index b93d0846619856..3fd7b5e644f3b6 100644
    --- a/drivers/clk/mmp/clk-pxa1908-apbc.c
    +++ b/drivers/clk/mmp/clk-pxa1908-apbc.c
    @@ -96,8 +96,8 @@ static int pxa1908_apbc_probe(struct platform_device *pdev)
     	struct pxa1908_clk_unit *pxa_unit;
     
     	pxa_unit = devm_kzalloc(&pdev->dev, sizeof(*pxa_unit), GFP_KERNEL);
    -	if (IS_ERR(pxa_unit))
    -		return PTR_ERR(pxa_unit);
    +	if (!pxa_unit)
    +		return -ENOMEM;