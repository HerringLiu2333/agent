    diff --git a/fs/ubifs/debug.c b/fs/ubifs/debug.c
    index 3f128b9fdfbb23..9613725ed19359 100644
    --- a/fs/ubifs/debug.c
    +++ b/fs/ubifs/debug.c
    @@ -946,16 +946,20 @@ void ubifs_dump_tnc(struct ubifs_info *c)
     
     	pr_err("\n");
     	pr_err("(pid %d) start dumping TNC tree\n", current->pid);
    -	znode = ubifs_tnc_levelorder_next(c, c->zroot.znode, NULL);
    -	level = znode->level;
    -	pr_err("== Level %d ==\n", level);
    -	while (znode) {
    -		if (level != znode->level) {
    -			level = znode->level;
    -			pr_err("== Level %d ==\n", level);
    -		}
    -		ubifs_dump_znode(c, znode);
    -		znode = ubifs_tnc_levelorder_next(c, c->zroot.znode, znode);
    +	if (c->zroot.znode) {
    +		znode = ubifs_tnc_levelorder_next(c, c->zroot.znode, NULL);
    +		level = znode->level;
    +		pr_err("== Level %d ==\n", level);
    +		while (znode) {
    +			if (level != znode->level) {
    +				level = znode->level;
    +				pr_err("== Level %d ==\n", level);
    +			}
    +			ubifs_dump_znode(c, znode);
    +			znode = ubifs_tnc_levelorder_next(c, c->zroot.znode, znode);
    +		}
    +	} else {
    +		pr_err("empty TNC tree in memory\n");
     	}
     	pr_err("(pid %d) finish dumping TNC tree\n", current->pid);
     }