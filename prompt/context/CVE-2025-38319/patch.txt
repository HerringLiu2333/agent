    @@ -143,6 +143,10 @@ int atomctrl_initialize_mc_reg_table(
     	vram_info = (ATOM_VRAM_INFO_HEADER_V2_1 *)
     		smu_atom_get_data_table(hwmgr->adev,
     				GetIndexIntoMasterTable(DATA, VRAM_Info), &size, &frev, &crev);
    +	if (!vram_info) {
    +		pr_err("Could not retrieve the VramInfo table!");
    +		return -EINVAL;
    +	}
     
     	if (module_index >= vram_info->ucNumOfVRAMModule) {
     		pr_err("Invalid VramInfo table.");
    @@ -180,6 +184,10 @@ int atomctrl_initialize_mc_reg_table_v2_2(
     	vram_info = (ATOM_VRAM_INFO_HEADER_V2_2 *)
     		smu_atom_get_data_table(hwmgr->adev,
     				GetIndexIntoMasterTable(DATA, VRAM_Info), &size, &frev, &crev);
    +	if (!vram_info) {
    +		pr_err("Could not retrieve the VramInfo table!");
    +		return -EINVAL;
    +	}
     
     	if (module_index >= vram_info->ucNumOfVRAMModule) {
     		pr_err("Invalid VramInfo table.");