    @@ -146,11 +146,10 @@ void atm_dev_deregister(struct atm_dev *dev)
         mutex_lock(&atm_dev_mutex);
         list_del(&dev->dev_list);
    -	  mutex_unlock(&atm_dev_mutex);
    -
         atm_dev_release_vccs(dev);
         atm_unregister_sysfs(dev);
         atm_proc_dev_deregister(dev);
    +    mutex_lock(&atm_dev_mutex);
     
         atm_dev_put(dev);