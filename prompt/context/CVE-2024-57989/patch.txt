    diff --git a/drivers/net/wireless/mediatek/mt76/mt7925/main.c b/drivers/net/wireless/mediatek/mt76/mt7925/main.c
    index 791c8b00e11264..a5110f8485e526 100644
    --- a/drivers/net/wireless/mediatek/mt76/mt7925/main.c
    +++ b/drivers/net/wireless/mediatek/mt76/mt7925/main.c
    @@ -1946,6 +1946,8 @@ mt7925_change_vif_links(struct ieee80211_hw *hw, struct ieee80211_vif *vif,
     					     GFP_KERNEL);
     			mlink = devm_kzalloc(dev->mt76.dev, sizeof(*mlink),
     					     GFP_KERNEL);
    +			if (!mconf || !mlink)
    +				return -ENOMEM;
     		}
     
     		mconfs[link_id] = mconf;